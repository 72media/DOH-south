<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏´‡∏•‡∏ß‡∏á‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('collapsed');
}
function goToCamera(name, lat, lng) {
  map.setView([lat, lng], 13);
  map.eachLayer(function (layer) {
    if (layer.getPopup && layer.getPopup()) {
      const content = layer.getPopup().getContent();
      if (content.includes(name)) {
        layer.openPopup();
      }
    }
  });
}


const baseLayers = {
  hybrid: L.tileLayer('https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}', { maxZoom: 19 }),
  satellite: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'),
  road: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }),
  dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 })
};

let currentBase = baseLayers.hybrid.addTo(map);

function switchBaseMap(type) {
  map.removeLayer(currentBase);
  currentBase = baseLayers[type];
  currentBase.addTo(map);
}

</script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest">
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('collapsed');
}
function goToCamera(name, lat, lng) {
  map.setView([lat, lng], 13);
  map.eachLayer(function (layer) {
    if (layer.getPopup && layer.getPopup()) {
      const content = layer.getPopup().getContent();
      if (content.includes(name)) {
        layer.openPopup();
      }
    }
  });
}


const baseLayers = {
  hybrid: L.tileLayer('https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}', { maxZoom: 19 }),
  satellite: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'),
  road: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }),
  dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 })
};

let currentBase = baseLayers.hybrid.addTo(map);

function switchBaseMap(type) {
  map.removeLayer(currentBase);
  currentBase = baseLayers[type];
  currentBase.addTo(map);
}

</script>
  <style>
    html, body, #map { height: 100%; margin: 0; padding: 0; }
    .camera-btn {
      background: #1e88e5;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 16px;
      margin: 3px;
      font-size: 13px;
      cursor: pointer;
    }
    .camera-btn:hover {
      background: #1565c0;
    }
    .popup-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 5px;
    }
  </style>
<style>
#sidebar {
  position: fixed;
  right: 0;
  top: 0;
  height: 100%;
  width: 260px;
  background: #f7f9fb;
  border-left: 1px solid #ccc;
  overflow-y: auto;
  box-shadow: -2px 0 5px rgba(0,0,0,0.1);
  transition: right 0.3s ease;
  z-index: 1000;
}
#sidebar.collapsed {
  right: -260px;
}
#sidebar-toggle {
  position: fixed;
  right: 270px;
  top: 20px;
  background: #1e88e5;
  color: white;
  padding: 8px 14px;
  border-radius: 8px 0 0 8px;
  cursor: pointer;
  z-index: 1001;
}
#sidebar-content {
  padding: 15px;
}
.province-title {
  background: #1e88e5;
  color: white;
  padding: 6px 10px;
  margin: 10px 0 4px;
  border-radius: 4px;
  font-weight: bold;
}
.camera-item {
  padding: 6px 10px;
  margin: 2px 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
  cursor: pointer;
}
.camera-item:hover {
  background: #e3f2fd;
}
</style>
<style>
#layer-control {
  position: fixed;
  top: 20px;
  left: 50px;
  background: yellow;
  padding: 6px 12px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  font-family: 'Prompt', sans-serif;
  z-index: 1001;
}
#layer-control select {
  padding: 4px 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
  font-family: 'Prompt', sans-serif;
}
</style>
</head>
<body>

<div id="layer-control">
  <label>üó∫Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà:</label>
  <select onchange="switchBaseMap(this.value)">
    <option value="hybrid" selected>Google Hybrid</option>
    <option value="satellite">‡∏î‡∏≤‡∏ß‡πÄ‡∏ó‡∏µ‡∏¢‡∏°</option>
    <option value="road">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏ô‡∏ô</option>
    <option value="dark">‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î</option>
  </select>
</div>

<div id="sidebar">
  <div id="sidebar-toggle" onclick="toggleSidebar()">‚ò∞ ‡∏Å‡∏•‡πâ‡∏≠‡∏á</div>
  <div id="sidebar-content">
    <div class="province-group">
      <div class="province-title">‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå</div>
      <div class="camera-item" onclick="goToCamera('‡∏ö‡πà‡∏≠‡∏ô‡∏≠‡∏Å', 11.94599, 99.82448)">‡∏ö‡πà‡∏≠‡∏ô‡∏≠‡∏Å</div>
      <div class="camera-item" onclick="goToCamera('‡∏ö‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô', 11.2044, 99.40421)">‡∏ö‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏ä‡∏∏‡∏°‡∏û‡∏£</div>
      <div class="camera-item" onclick="goToCamera('‡∏ß‡∏±‡∏á‡∏ï‡∏∞‡∏Å‡∏≠', 9.97798, 99.04399)">‡∏ß‡∏±‡∏á‡∏ï‡∏∞‡∏Å‡∏≠</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏£‡∏∞‡∏ô‡∏≠‡∏á</div>
      <div class="camera-item" onclick="goToCamera('‡∏ö‡∏≤‡∏á‡∏ô‡∏≠‡∏ô', 10.01361, 98.65619)">‡∏ö‡∏≤‡∏á‡∏ô‡∏≠‡∏ô</div>
      <div class="camera-item" onclick="goToCamera('‡∏£‡∏≤‡∏ä‡∏Å‡∏£‡∏π‡∏î', 9.74331, 98.5975)">‡∏£‡∏≤‡∏ä‡∏Å‡∏£‡∏π‡∏î</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ</div>
      <div class="camera-item" onclick="goToCamera('‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô', 9.23859, 99.69694)">‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô</div>
      <div class="camera-item" onclick="goToCamera('‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å', 9.13436, 99.25231)">‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å</div>
      <div class="camera-item" onclick="goToCamera('‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà', 9.04987, 99.36445)">‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏û‡∏±‡∏á‡∏á‡∏≤</div>
      <div class="camera-item" onclick="goToCamera('‡∏ó‡∏±‡∏ö‡∏õ‡∏∏‡∏î', 8.50891, 98.65739)">‡∏ó‡∏±‡∏ö‡∏õ‡∏∏‡∏î</div>
      <div class="camera-item" onclick="goToCamera('‡∏Å‡∏∞‡πÇ‡∏™‡∏°', 8.40806, 98.45695)">‡∏Å‡∏∞‡πÇ‡∏™‡∏°</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä</div>
      <div class="camera-item" onclick="goToCamera('‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠', 8.95986, 99.89484)">‡∏™‡∏¥‡∏ä‡∏•</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä</div>
      <div class="camera-item" onclick="goToCamera('‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠', 8.27622, 99.99974)">‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà</div>
      <div class="camera-item" onclick="goToCamera('‡πÄ‡∏Ç‡∏≤‡∏Ñ‡∏£‡∏≤‡∏°', 8.20723, 98.81496)">‡πÄ‡∏Ç‡∏≤‡∏Ñ‡∏£‡∏≤‡∏°</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</div>
      <div class="camera-item" onclick="goToCamera('‡∏ñ‡∏•‡∏≤‡∏á', 8.066916, 98.3424183)">‡∏ñ‡∏•‡∏≤‡∏á</div>
      <div class="camera-item" onclick="goToCamera('‡∏ñ‡∏•‡∏≤‡∏á', 7.9218366, 98.3708657)">‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏ï‡∏£‡∏±‡∏á</div>
      <div class="camera-item" onclick="goToCamera('‡∏ô‡∏≤‡πÇ‡∏¢‡∏á', 7.55862, 99.71919)">‡∏ô‡∏≤‡πÇ‡∏¢‡∏á</div>
      <div class="camera-item" onclick="goToCamera('‡∏£‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ï‡∏£‡∏±‡∏á', 7.55206, 99.58181)">‡∏£‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ï‡∏£‡∏±‡∏á</div>
      <div class="camera-item" onclick="goToCamera('‡∏£‡∏±‡∏©‡∏é‡∏≤', 7.93371, 99.59772)">‡∏£‡∏±‡∏©‡∏é‡∏≤</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á</div>
      <div class="camera-item" onclick="goToCamera('‡∏õ‡πà‡∏≤‡∏ö‡∏≠‡∏ô', 7.11811, 100.32131)">‡∏õ‡πà‡∏≤‡∏ö‡∏≠‡∏ô</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏™‡∏á‡∏Ç‡∏•‡∏≤</div>
      <div class="camera-item" onclick="goToCamera('‡∏™‡∏¥‡∏á‡∏´‡∏ô‡∏Ñ‡∏£', 7.25643, 100.52826)">‡∏™‡∏¥‡∏á‡∏´‡∏ô‡∏Ñ‡∏£</div>
      <div class="camera-item" onclick="goToCamera('‡∏ñ.‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏≤‡πÄ‡∏°‡∏®', 7.07166, 100.49274)">‡∏ñ.‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏≤‡πÄ‡∏°‡∏®</div>
      <div class="camera-item" onclick="goToCamera('‡∏à‡∏∞‡∏ô‡∏∞', 7.00364, 100.67241)">‡∏à‡∏∞‡∏ô‡∏∞</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ</div>
      <div class="camera-item" onclick="goToCamera('‡∏´‡∏ô‡∏≠‡∏á‡∏à‡∏¥‡∏Å', 6.84974, 101.19548)">‡∏´‡∏ô‡∏≠‡∏á‡∏à‡∏¥‡∏Å</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏¢‡∏∞‡∏•‡∏≤</div>
      <div class="camera-item" onclick="goToCamera('‡∏¢‡∏∞‡∏•‡∏≤', 6.61849, 101.23681)">‡∏¢‡∏∞‡∏•‡∏≤</div>
    </div>
    <div class="province-group">
      <div class="province-title">‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™</div>
      <div class="camera-item" onclick="goToCamera('‡∏¢‡∏µ‡πà‡∏á‡∏≠', 6.4039, 101.72462)">‡∏¢‡∏µ‡πà‡∏á‡∏≠</div>
    </div>
  </div>
</div>

<div id="map"></div>
<div id="video-container" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000000cc;z-index:999;align-items:center;justify-content:center;">
  <video id="video-player" controls autoplay style="max-width:90%;max-height:90%;background:black;"></video>
</div>
<script>
const cameras = [
  { name: "‡∏´‡∏ô‡∏≠‡∏á‡∏à‡∏¥‡∏Å", lat: 6.84974, lng: 101.19548, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_013.stream/playlist.m3u8", province: "‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ" },
  { name: "‡∏à‡∏∞‡∏ô‡∏∞", lat: 7.00364, lng: 100.67241, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_012.stream/playlist.m3u8", province: "‡∏™‡∏á‡∏Ç‡∏•‡∏≤" },
  { name: "‡∏ñ.‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ‡∏£‡∏≤‡πÄ‡∏°‡∏®", lat: 7.07166, lng: 100.49274, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_036.stream/playlist.m3u8", province: "‡∏™‡∏á‡∏Ç‡∏•‡∏≤" },
  { name: "‡∏õ‡πà‡∏≤‡∏ö‡∏≠‡∏ô", lat: 7.11811, lng: 100.32131, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_010.stream/playlist.m3u8", province: "‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á" },
  { name: "‡∏™‡∏¥‡∏á‡∏´‡∏ô‡∏Ñ‡∏£", lat: 7.25643, lng: 100.52826, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_035.stream/playlist.m3u8", province: "‡∏™‡∏á‡∏Ç‡∏•‡∏≤" },
  { name: "‡∏£‡∏±‡∏©‡∏é‡∏≤", lat: 7.93371, lng: 99.59772, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_033.stream/playlist.m3u8", province: "‡∏ï‡∏£‡∏±‡∏á" },
  { name: "‡∏£‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ï‡∏£‡∏±‡∏á", lat: 7.55206, lng: 99.58181, url: "https://streaming2.highwaytraffic.go.th/Phase18/PER_18_003.stream/playlist.m3u8", province: "‡∏ï‡∏£‡∏±‡∏á" },
  { name: "‡∏ô‡∏≤‡πÇ‡∏¢‡∏á", lat: 7.55862, lng: 99.71919, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_027.stream/playlist.m3u8", province: "‡∏ï‡∏£‡∏±‡∏á" },
  { name: "‡πÄ‡∏Ç‡∏≤‡∏Ñ‡∏£‡∏≤‡∏°", lat: 8.20723, lng: 98.81496, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_007.stream/playlist.m3u8", province: "‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà" },
  { name: "‡∏Å‡∏∞‡πÇ‡∏™‡∏°", lat: 8.40806, lng: 98.45695, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_008.stream/playlist.m3u8", province: "‡∏û‡∏±‡∏á‡∏á‡∏≤" },
  { name: "‡∏ó‡∏±‡∏ö‡∏õ‡∏∏‡∏î", lat: 8.50891, lng: 98.65739, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_024.stream/playlist.m3u8", province: "‡∏û‡∏±‡∏á‡∏á‡∏≤" },
  { name: "‡∏ñ‡∏•‡∏≤‡∏á", lat: 8.066916, lng: 98.3424183, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_032_IN.stream/playlist.m3u8", province: "‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï" },
  { name: "‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á", lat: 7.92188, lng: 98.37095, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_038.stream/playlist.m3u8", province: "‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï" },
  { name: "‡∏ö‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà", lat: 9.04987, lng: 99.36445, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_005.stream/playlist.m3u8", province: "‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ" },
  { name: "‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å", lat: 9.13436, lng: 99.25231, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_003.stream/playlist.m3u8", province: "‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ" },
  { name: "‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô", lat: 9.23859, lng: 99.69694, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_006.stream/playlist.m3u8", province: "‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ" },
  { name: "‡∏ß‡∏±‡∏á‡∏ï‡∏∞‡∏Å‡∏≠", lat: 9.97798, lng: 99.04399, url: "https://streaming2.highwaytraffic.go.th/Phase14/PER_14_009.stream/playlist.m3u8", province: "‡∏ä‡∏∏‡∏°‡∏û‡∏£" },
  { name: "‡∏ö‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô", lat: 11.2044, lng: 99.40421, url: "https://streaming1.highwaytraffic.go.th/Phase5/PER_5_008.stream/playlist.m3u8", province: "‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå" },
  { name: "‡∏ö‡πà‡∏≠‡∏ô‡∏≠‡∏Å", lat: 11.94599, lng: 99.82448, url: "https://streaming1.highwaytraffic.go.th/Phase5/PER_5_007_OUT.stream/playlist.m3u8", province: "‡∏õ‡∏£‡∏∞‡∏à‡∏ß‡∏ö‡∏Ñ‡∏µ‡∏£‡∏µ‡∏Ç‡∏±‡∏ô‡∏ò‡πå" },
  { name: "‡∏ö‡∏≤‡∏á‡∏ô‡∏≠‡∏ô", lat: 10.01361, lng: 98.65619, url: "https://streaming2.highwaytraffic.go.th/Phase18/PER_18_004.stream/playlist.m3u8", province: "‡∏£‡∏∞‡∏ô‡∏≠‡∏á" },
  { name: "‡∏£‡∏≤‡∏ä‡∏Å‡∏£‡∏π‡∏î", lat: 9.74331, lng: 98.5975, url: "https://streaming2.highwaytraffic.go.th/Phase18/PER_18_005.stream/playlist.m3u8", province: "‡∏£‡∏∞‡∏ô‡∏≠‡∏á" },
  { name: "‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠", lat: 8.27622, lng: 99.99974, url: "https://streaming2.highwaytraffic.go.th/Phase18/PER_18_002.stream/playlist.m3u8", province: "‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä" },
  { name: "‡∏™‡∏¥‡∏ä‡∏•", lat: 8.95986, lng: 99.89484, url: "https://streaming1.highwaytraffic.go.th/Phase8/PER_8_031.stream/playlist.m3u8", province: "‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä" },
  { name: "‡∏¢‡∏∞‡∏•‡∏≤", lat: 6.61849, lng: 101.23681, url: "https://streaming2.highwaytraffic.go.th/Phase18/PER_18_007.stream/playlist.m3u8", province: "‡∏¢‡∏∞‡∏•‡∏≤" },
  { name: "‡∏¢‡∏µ‡πà‡∏á‡∏≠", lat: 6.4039, lng: 101.72462, url: "https://streaming2.highwaytraffic.go.th/Phase18/PER_18_006.stream/playlist.m3u8", province: "‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™" }
];

const map = L.map('map').setView([8.5, 99.5], 7);
L.tileLayer('https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}', {
  maxZoom: 19
}).addTo(map);

const cameraIcon = L.icon({
  iconUrl: 'https://public.youware.com/users-website-assets/prod/87ede7ac-82ea-4c1d-88d8-7109917d3674/camera.png',
  iconSize: [32, 32],
  iconAnchor: [16, 32],
  popupAnchor: [0, -30]
});

cameras.forEach(camera => {
  const marker = L.marker([camera.lat, camera.lng], { icon: cameraIcon }).addTo(map);
  marker.bindPopup(`
    <strong>${camera.name}</strong> (${camera.province})
    <div class="popup-buttons">
      <button class="camera-btn" onclick="openVideo('${camera.url}')">‡∏î‡∏π‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
      <button class="camera-btn" onclick="openStreetView(${camera.lat}, ${camera.lng})">‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
    </div>
  `);
});

function openVideo(url) {
  const player = document.getElementById('video-player');
  const container = document.getElementById('video-container');
  container.style.display = 'flex';
  if (Hls.isSupported()) {
    const hls = new Hls();
    hls.loadSource(url);
    hls.attachMedia(player);
    hls.on(Hls.Events.MANIFEST_PARSED, () => player.play());
  } else {
    player.src = url;
    player.play();
  }
  container.onclick = () => {
    player.pause();
    player.src = "";
    container.style.display = 'none';
  };
}

function openStreetView(lat, lng) {
  window.open(`https://www.google.com/maps?q=&layer=c&cbll=${lat},${lng}&cbp=11,0,0,0,0`, '_blank');
}

function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('collapsed');
}
function goToCamera(name, lat, lng) {
  map.setView([lat, lng], 13);
  map.eachLayer(function (layer) {
    if (layer.getPopup && layer.getPopup()) {
      const content = layer.getPopup().getContent();
      if (content.includes(name)) {
        layer.openPopup();
      }
    }
  });
}


const baseLayers = {
  hybrid: L.tileLayer('https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}', { maxZoom: 19 }),
  satellite: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'),
  road: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }),
  dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 })
};

let currentBase = baseLayers.hybrid.addTo(map);

function switchBaseMap(type) {
  map.removeLayer(currentBase);
  currentBase = baseLayers[type];
  currentBase.addTo(map);
}

</script>
</body>
</html>
